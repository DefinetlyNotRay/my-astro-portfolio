---
import "../styles/global.css";
import ProjectsGrid from "../components/ProjectsGrid.astro";
import type { Project } from "../components/ProjectsGrid.astro";
import { Accordion } from "../components/content/Accordion.tsx";

// Sample projects data - you can replace this with your actual data

const accordionData = [
	{
		title: "Nexademy",
		what: "What is Nexademy?",
    whata: "Nexademy is a school app that is made by the Nexthrive Mobile Team.",
		why: "Why did we make Nexademy?",
		whya: "We've seen a lot of school apps especially the ones that most school uses that are not up to date to the current standard of mobile apps, we see a lot of school trying to work with the their current app but failing because the app has terrible support and features. The number one thing ive struggled with in this project is trying to make it responsive with every type of mobile devices.",
		how: "How did i overcome it?",
		howa: `By using a mix of the "react-native-size-matters" package and tailwindcss, I was able to make it responsive with almost every type of mobile devices.`,
    github:'https://github.com/Nexthrive/NexademyV2MOBILE'
	},
  {
		title: "QueenFood Absen",
		what: "What is QueenFood Absen?",
    whata: "QueenFood Absen is a sales attendance app.",
		why: "Why did i make QueenFood Absen?",
		whya: "I was asked by the comapny to make this for their sales team.What i strugled with was trying to make push notification to the admin when a sales person has attended or requesting a day off",
		how: "How did i overcome it?",
		howa: `By using the "Firebase Cloud Messaging API" and "Expo Push Notification" package i was able to make the push notification acros devices `,
    github:'https://github.com/DefinetlyNotRay/QueenFoodAbsen'

	},	
];
const projects: Project[] = [
  {
    title: "Weather App",
    description: "A Weather WebApp made with ReactJS. This project uses the VisualCrossing's API",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7DMXXdY9mUOd4PsD1IYHJi8uVZNFbexfTkLrQ",
    tags: ["React"],
    siteUrl: "https://project-weatherapp-web.netlify.app/",
    githubUrl: "https://github.com/DefinetlyNotRay/Weather-Web",
    category: "React"
  },
  {
    title: "Nexademy (WIP)",
    description: "A School student app like 'Sekolahan ID' but better made by the Nexthrive Mobile Team!",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7bDmrbvM6JHSpAW4kfPh0GjqV1xDwnaQIrOCo",
    tags: ["React Native", "Expo","TailwindCSS"],
    siteUrl: "#",
    githubUrl: "https://github.com/Nexthrive/NexademyV2MOBILE",
    category: "Expo"
  },  
  {
    title: "GIS Map",
    description: "A Geographic Information System (GIS) Map made with ReactJS and OverpassAPI, and TomTom Map Api",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7vwIavAsDAX1iqGdYjLebFQ06PkxZ4WBa792l",
    tags: ["React", "TailwindCSS"],
    siteUrl: "https://gis-react-mxy5.vercel.app/",
    githubUrl: "https://github.com/DefinetlyNotRay/GISReact",
    category: "React"
  },
  {
    title: "Attendance App (No Longer Supported)",
    description: "A Attendance App made with Expo React Native, Firebase Push Notification. Sadly i no longer support the database for this",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7zvDrOcxJgfdanS4orYy2wMCj8ehb9kqE13pO",
    tags: ["React Native", "Expo"],
    siteUrl: "#",
    githubUrl: "https://github.com/DefinetlyNotRay/QueenFoodAbsen",
    category: "React Native"
  },  
  {
    title: "Coffee Shop Frontend",
    description: "A Coffee Shop Frontend I made during my internship with vanilla HTML, CSS, and Bootstrap",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7S75humFa2751tNmOeXcR9bnlBvW3fas4KzhV",
    tags: ["HTML"],
    siteUrl: "https://coffee-shop-pi-ivory.vercel.app/",
    githubUrl: "https://github.com/DefinetlyNotRay/QueenFoodAbsen",
    category: "HTML"
  }, 
  {
    title: "Library Website",
    description: "A Library Website i made for my school assignment using Laravel, TailwindCSS, and SQLite",
    imageUrl: "https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7PlhdyY3htMEHT9eVXvjidDWpsz2YCP6kOZUq",
    tags: ["Laravel","TailwindCSS","SQLite","PHP"],
    siteUrl: "#",
    githubUrl: "https://github.com/DefinetlyNotRay/laravel-breeze-multi-auth",
    category: "Laravel"
  },   
  
];

// Get current page from URL query parameter
const currentPage = Astro.url.searchParams.get('page') ? parseInt(Astro.url.searchParams.get('page') as string) : 1;
---

<html lang="en">
  <head>
    <title>My Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Luckiest+Guy&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sacramento&display=swap" rel="stylesheet">
    <style>
      /* Loading bar styles */
      .loading-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      .loading-text {
        font-family: 'Lato', sans-serif;
        font-weight: 700;
        font-size: 24px;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 2px;
      }
      .loading-bar-container {
        width: 300px;
        height: 10px;
        background-color: #f0f0f0;
        border-radius: 5px;
        overflow: hidden;
      }
      .loading-bar {
        height: 100%;
        width: 0%;
        background-color: #0C0C0C;
        border-radius: 5px;
      }
    </style>
  </head>
  <body style="font-family: 'Lato', sans-serif;" class="overflow-x-hidden md:overflow-x-hidden">
    <!-- Loading screen -->
    <div class="loading-container">
      <div class="loading-text">generating UI/UX wait a moment</div>
      <div class="loading-bar-container">
        <div class="loading-bar"></div>
      </div>
    </div>

    <div class="">
      <nav class="text-black flex flex-row justify-center py-10 text-sm">
  
      </nav>

      <main class="flex flex-col items-center justify-center mt-10" >
        <div id="home" class="flex flex-col lg:flex-row justify-center gap-10 lg:gap-28 w-full items-center h-full px-4 md:px-0">
          <div class="relative">
            <div class="absolute -top-10 -right-22 w-[150px] hidden lg:block md:w-[220px] h-[80px] md:h-[100px] bg-[#F6F6F6] rounded-[17px] rectangle-right" style="box-shadow: 0px 0px 21.9px 5px rgba(0, 0, 0, 0.25);"></div>         
            <div
              class="w-[300px] md:w-[400px] lg:w-[534px] h-[400px] md:h-[500px] lg:h-[698px] lazy-background"
              data-bg-src="https://5r7rfju2l4.ufs.sh/f/u1nbYPCUJps7AlSADSFc3pC5ShFDYOXkMTxlUQ2wsfBJEev9"
              style="background-color: #f0f0f0;"
            ></div>
            <div class="absolute -bottom-10 -left-22 w-[150px] md:w-[220px] h-[80px] hidden lg:block md:h-[100px] bg-[#F6F6F6] rounded-[17px] rectangle-left" style="box-shadow: 0px 0px 21.9px 5px rgba(0, 0, 0, 0.25);"></div>         
          </div>
          <div class="mt-16 md:mt-0 px-4 md:px-0">
            <div class="text-center lg:text-left">
              <h1 class="font-bold text-4xl md:text-5xl lg:text-[64px] text-container leading-tight tracking-tight">Hi, I&apos;m Edgar and I&apos;m</h1>
              <div class="flex gap-1 justify-center md:justify-baseline md:gap-2 flex-row flex-wrap">
                <h2 class="font-bold text-2xl md:text-4xl lg:text-[48px] leading-tight text-container tracking-tight">a</h2>
                <span class="bg-[#0C0C0C] black-text font-bold text-2xl md:text-4xl lg:text-[48px] leading-tight text-[#FFFEFE]">Junior Web & Mobile Developer</span>
                <span class="dot-text font-bold text-2xl md:text-4xl lg:text-[48px] leading-tight">.</span>
              </div>
              <p class="text-lg md:text-xl font-medium text-container leading-tight mt-2 tracking-tight text-[#6C6C6C] w-full md:w-[50ch]">I&apos;m a Junior Web & Mobile Developer based in Bojongsari, Indonesia. I&apos;m a fresh graduate from SMK Tunas Media and I&apos;m majoring in Informatika at Universitas Bunda Mulia.</p>
            </div>
          </div>
        </div>
        <div id="home" class="flex mt-50 flex-col lg:flex-row justify-center gap-10 lg:gap-28 w-full items-center h-full px-4 md:px-0">
         
          <div class="mt-16 md:mt-0 px-4 md:px-0">
            <div class="text-center lg:text-left">
              <h1 class="font-bold text-4xl md:text-5xl lg:text-[64px] text-container leading-tight tracking-tight">About Me</h1>
       
              <p class="text-lg md:text-xl font-medium text-container leading-tight mt-2 tracking-tight text-[#6C6C6C] w-full md:w-[120ch]">I'm someone who's always been passionate about pushing boundaries and exploring new possibilities. Ever since I can remember, I've been driven by a deep curiosity and a desire to make a meaningful impact in everything I do. Whether it's through my work, my personal projects, or collaborations with others, I strive to bring creativity, dedication, and a fresh perspective to the table.

                Throughout my journey, I've encountered countless opportunities to grow, learn, and adapt - experiences that have shaped me into the person I am today. My motivation stems from the want to provide and give back to my two loving parents, and I'm constantly inspired by my peers that constantly push me to be better. Challenges don't intimidate me; instead, they fuel my determination to innovate and overcome.
                
                I believe in continuous learning, staying true to my values, and building authentic connections with the people around me.
                
                At the core of everything I do is a commitment to learning from my mistakes and getting back up 2 times stronger, and I'm excited to see where this journey will take me next.</p>
            </div>
          </div>
        </div>
        <div id="work" class="mt-20 md:mt-40 leading-tight w-full tracking-tight px-4 md:px-0">
          <div class="flex justify-center w-full ">
            <div class="">

              <div class="flex w-[90rem] flex-col justify-center">
                <div>
                  <h1 class="font-black text-4xl md:text-5xl lg:text-[64px] text-right">My Proudest Work</h1>
                  <Accordion data={accordionData} client:idle />
                </div>
              
                 
             </div> 
              </div>
  
              <!-- <div class="flex justify-center mt-17 w-full">
                <ProjectsGrid projects={projects} currentPage={currentPage} />
              </div> -->
            </div>
            </div>
        </div>
        <div id="work" class="mt-20 md:mt-40 leading-tight w-full tracking-tight px-4 md:px-0">
          <div>
            <div class="flex w-full flex-col items-center justify-center">
              <div>
                <h1 class="font-black text-4xl md:text-5xl lg:text-[64px] text-center">Work</h1>
                <p class="text-[#6C6C6C] font-medium text-xl md:text-2xl text-center">Check my personal projects & work projects</p>
              </div>
              <div class="mt-8 overflow-x-auto w-full">
                <div class="flex gap-2 md:gap-5 min-w-max md:min-w-0 justify-center">
                  <button class="filter-btn bg-[#1E1E1E] text-white px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="all">All ({projects.length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="React">React ({projects.filter(p => p.category === "React" || p.tags.includes("React")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="React Native">React Native ({projects.filter(p => p.category === "React Native" || p.tags.includes("React Native")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="Expo">Expo ({projects.filter(p => p.tags.includes("Expo")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="HTML">HTML ({projects.filter(p => p.category === "HTML" || p.tags.includes("HTML")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="Laravel">Laravel ({projects.filter(p => p.tags.includes("Laravel")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="PHP">PHP ({projects.filter(p => p.tags.includes("PHP")).length})</button>
                  <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="SQLite">SQLite ({projects.filter(p => p.tags.includes("SQLite")).length})</button>

                  <!-- <button class="filter-btn bg-[#EFEFEF] text-black px-4  md:px-7 lg:px-8 lg:text-sm py-2 md:py-3 rounded-4xl font-bold  md:text-xl" data-category="JavaScript">JavaScript ({projects.filter(p => p.tags.includes("JavaScript")).length})</button> -->
                </div>
              </div>
            </div>

            <div class="flex justify-center mt-17 w-full">
              <ProjectsGrid projects={projects} currentPage={currentPage} />
            </div>
          </div>
        </div>
        <div class="leading-tight w-full tracking-tight px-4 md:px-0">
          <div>
            <div class="flex w-full flex-col items-center justify-center">
              <div>
                <h1 class="font-black text-4xl md:text-5xl lg:text-[56px] text-center leading-tight text-[#0C0C0C]">Resume</h1>
                <p class="text-[#6C6C6C] max-w-full md:max-w-[54ch] font-medium text-xl md:text-2xl text-center">I started my journey as a programmer 3 years ago when i enrolled to SMK Tunas Media and been loving it since. These are the experience and skills i developed throughout those 3 years</p>
              </div>
              <h1 class="bg-[#0C0C0C] mt-16 md:mt-28 font-bold text-2xl md:text-3xl lg:text-[36px] leading-tight text-[#FFFEFE]">Education</h1>

                <div class="mt-8 flex flex-col gap-2">
                  <h3 class="font-bold text-xl md:text-2xl text-center leading-tight">SMK Tunas Media</h3>
                  <h4 class="font-medium leading-tight">Rekayasa Perangkat Lunakk</h4>
                  <p class="text-[#6C6C6C] text-sm text-center leading-tight">2023-2025</p>
                </div>
                <h1 class="bg-[#0C0C0C] mt-10 font-bold text-2xl md:text-3xl lg:text-[36px] leading-tight text-[#FFFEFE]">Work Experience</h1>

                <div class="mt-8 flex flex-col text-center  gap-10">
                  <div class="flex flex-col text-center gap-2">
                    <h3 class="font-bold text-xl md:text-2xl leading-tight">Intern Frontend Developer</h3>
                    <h4 class="font-medium leading-tight">Merah Putih Media</h4>
                    <p class="text-[#6C6C6C] text-sm leading-tight">Febuary 2024 - March 2024</p>
                  </div>
                  <div class="flex flex-col text-center gap-2">
                    <h3 class="font-bold text-xl md:text-2xl leading-tight">Head Mobile Developer</h3>
                    <h4 class="font-medium leading-tight">Nexthrive</h4>
                    <p class="text-[#6C6C6C] text-sm leading-tight">Febuary 2024 - Present</p>
                  </div>
                </div>
                <h1 class="bg-[#0C0C0C] mt-10 font-bold text-2xl md:text-3xl lg:text-[36px] leading-tight text-[#FFFEFE]">Skills</h1>

                <div class="mt-8 flex flex-col  text-left md:flex-row items-center justify-center gap-8 md:gap-15">
                  <div class="flex  flex-col gap-3">
                    <p class="font-medium">Java</p>
                    <p class="font-medium">React Native</p>
                    <p class="font-medium">React JS</p>
                    <p class="font-medium">NextJS</p>
                  </div>
                  <div class="flex flex-col text-left w-full md:w-fit  gap-3">
                    <p class="font-medium">MySQL</p>
                    <p class="font-medium">Laravel</p>
                    <p class="font-medium">Expo</p>
                    <p class="font-medium">Javascript</p>
                  </div>
                </div>
          </div>
        </div>
      </main>
      <footer id="contact" class="bg-black text-white py-10 md:py-16 w-full mt-5">
        <div class="container px-6 md:px-20">
          <h2 class="text-3xl md:text-4xl font-bold mb-5">Contacts</h2>
          <div class="flex flex-col gap-2">
            <div class="flex items-center gap-3">
              <i class="uil uil-whatsapp text-xl"></i>
              <a href="https://wa.me/6289684257927" class="hover:underline text-sm md:text-base">Whatsapp: +62 89685237927</a>
            </div>
            <div class="flex items-center gap-3">
              <i class="uil uil-instagram text-xl"></i>
              <a href="https://instagram.com/DefinetlyRay" class="hover:underline text-sm md:text-base">Instagram: @DefinetlyRay</a>
            </div>
            <div class="flex items-center gap-3">
              <i class="uil uil-linkedin text-xl"></i>
              <a href="https://www.linkedin.com/in/edgar-manuello-agus-setiawan-96639635a/" class="hover:underline text-sm md:text-base">LinkedIn: Edgar Manuello Agus Setiawan</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <!-- Update the script tag to use client:load directive -->
    <script>
      // This will be processed by Astro and loaded on the client
      import { gsap } from "gsap";
      import { ScrollTrigger } from "gsap/ScrollTrigger";
    
      gsap.registerPlugin(ScrollTrigger);
    
      document.addEventListener('DOMContentLoaded', () => {
        // Disable scrolling when loading screen is visible
        document.body.style.overflow = 'hidden';
        
        // Loading animation
        const loadingBar = document.querySelector('.loading-bar');
        const loadingContainer = document.querySelector('.loading-container');
        
        // Animate loading bar
        gsap.to(loadingBar, {
          width: "100%",
          duration: 2,
          ease: "power1.inOut"
        });
        
        // Check if all images are loaded
        const allImages = Array.from(document.images);
        let loadedImagesCount = 0;
        
        // Function to hide loading screen
        const hideLoadingScreen = () => {
          // Start animations BEFORE the loading screen disappears
          startPageAnimations();
          
          // Then fade out the loading screen
          gsap.to(loadingContainer, {
            opacity: 0,
            duration: 0.5,
            onComplete: () => {
              loadingContainer.style.display = 'none';
              // Re-enable scrolling after loading screen is hidden
              document.body.style.overflow = '';
            }
          });
        };
        
        // If there are no images, hide loading screen after animation completes
        if (allImages.length === 0) {
          setTimeout(hideLoadingScreen, 2000);
        } else {
          // Check when all images are loaded
          allImages.forEach(img => {
            if (img.complete) {
              loadedImagesCount++;
              if (loadedImagesCount === allImages.length) {
                hideLoadingScreen();
              }
            } else {
              img.addEventListener('load', () => {
                loadedImagesCount++;
                if (loadedImagesCount === allImages.length) {
                  hideLoadingScreen();
                }
              });
              
              // Handle error case
              img.addEventListener('error', () => {
                loadedImagesCount++;
                if (loadedImagesCount === allImages.length) {
                  hideLoadingScreen();
                }
              });
            }
          });
          
          // Fallback in case some images fail to load
          setTimeout(() => {
            if (loadingContainer.style.display !== 'none') {
              hideLoadingScreen();
            }
          }, 5000);
        }
        
        // Function to start page animations
        function startPageAnimations() {
          // GSAP animations
          gsap.from(".text-container", {
            x: 100,
            opacity: 0,
            delay: 0.2,
            duration: 0.5,
            ease: "power3.out",
          });
          gsap.from(".rectangle-left", {
            x: -100,
            opacity: 0,
            duration: 0.6,
            ease: "power3.out",
            delay: 0.1,
          });
          gsap.from(".rectangle-right", {
            x: 100,
            opacity: 0,
            duration: 0.6,
            ease: "power3.out",
            delay: 0.1,
          });
          gsap.from(".black-text", {
            x: 140,
            opacity: 0,
            duration: 1,
            ease: "power3.out",
            delay: 0.3,
          });
          gsap.from(".dot-text", {
            x: 140,
            opacity: 0,
            duration: 1,
            ease: "power3.out",
            delay: 0.4,
          });
        }
        
        // Lazy loading for background images
        const lazyBackgrounds = document.querySelectorAll('.lazy-background');
        
        if ('IntersectionObserver' in window) {
          const lazyBackgroundObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const lazyBackground = entry.target;
                const bgSrc = lazyBackground.getAttribute('data-bg-src');
                
                if (bgSrc) {
                  lazyBackground.style.backgroundImage = `url('${bgSrc}')`;
                  lazyBackground.style.backgroundSize = 'cover';
                  lazyBackground.style.backgroundPosition = 'center';
                }
                
                lazyBackgroundObserver.unobserve(lazyBackground);
              }
            });
          });
          
          lazyBackgrounds.forEach(lazyBackground => {
            lazyBackgroundObserver.observe(lazyBackground);
          });
        } else {
          // Fallback for browsers that don't support IntersectionObserver
          lazyBackgrounds.forEach(lazyBackground => {
            const bgSrc = lazyBackground.getAttribute('data-bg-src');
            if (bgSrc) {
              lazyBackground.style.backgroundImage = `url('${bgSrc}')`;
              lazyBackground.style.backgroundSize = 'cover';
              lazyBackground.style.backgroundPosition = 'center';
            }
          });
        }
      });
    </script>
  </body>
</html>